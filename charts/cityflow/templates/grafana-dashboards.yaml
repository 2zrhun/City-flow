{{- if .Values.grafana.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-provider
data:
  dashboards.yml: |
    apiVersion: 1
    providers:
      - name: CityFlow
        orgId: 1
        folder: CityFlow
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /etc/grafana/provisioning/dashboards
          foldersFromFilesStructure: false
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-operations
data:
  cityflow-operations.json: |
{{ .Files.Get "dashboards/cityflow-operations.json" | indent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-business
data:
  cityflow-business.json: |
{{ .Files.Get "dashboards/cityflow-business.json" | indent 4 }}
{{- end }}
